window.JSON||(window.JSON={}),function(){function f(t){return 10>t?"0"+t:t}function quote(t){return escapable.lastIndex=0,escapable.test(t)?'"'+t.replace(escapable,function(t){var e=meta[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function str(t,e){var n,i,r,a,o,s=gap,l=e[t];switch(l&&"object"==typeof l&&"function"==typeof l.toJSON&&(l=l.toJSON(t)),"function"==typeof rep&&(l=rep.call(e,t,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,o=[],"[object Array]"===Object.prototype.toString.apply(l)){for(a=l.length,n=0;a>n;n+=1)o[n]=str(n,l)||"null";return r=0===o.length?"[]":gap?"[\n"+gap+o.join(",\n"+gap)+"\n"+s+"]":"["+o.join(",")+"]",gap=s,r}if(rep&&"object"==typeof rep)for(a=rep.length,n=0;a>n;n+=1)i=rep[n],"string"==typeof i&&(r=str(i,l),r&&o.push(quote(i)+(gap?": ":":")+r));else for(i in l)Object.hasOwnProperty.call(l,i)&&(r=str(i,l),r&&o.push(quote(i)+(gap?": ":":")+r));return r=0===o.length?"{}":gap?"{\n"+gap+o.join(",\n"+gap)+"\n"+s+"}":"{"+o.join(",")+"}",gap=s,r}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var JSON=window.JSON,cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(t,e,n){var i;if(gap="",indent="","number"==typeof n)for(i=0;n>i;i+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=e,!e||"function"==typeof e||"object"==typeof e&&"number"==typeof e.length)return str("",{"":t});throw new Error("JSON.stringify")}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(t,e){var n,i,r=t[e];if(r&&"object"==typeof r)for(n in r)Object.hasOwnProperty.call(r,n)&&(i=walk(r,n),void 0!==i?r[n]=i:delete r[n]);return reviver.call(t,e,r)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),function(t,e){"use strict";var n=t.History=t.History||{},i=t.jQuery;if("undefined"!=typeof n.Adapter)throw new Error("History.js Adapter has already been loaded...");n.Adapter={bind:function(t,e,n){i(t).bind(e,n)},trigger:function(t,e,n){i(t).trigger(e,n)},extractEventData:function(t,n,i){var r=n&&n.originalEvent&&n.originalEvent[t]||i&&i[t]||e;return r},onDomLoad:function(t){i(t)}},"undefined"!=typeof n.init&&n.init()}(window),function(t){"use strict";var e=t.document,n=t.setTimeout||n,i=t.clearTimeout||i,r=t.setInterval||r,a=t.History=t.History||{};if("undefined"!=typeof a.initHtml4)throw new Error("History.js HTML4 Support has already been loaded...");a.initHtml4=function(){return"undefined"!=typeof a.initHtml4.initialized?!1:(a.initHtml4.initialized=!0,a.enabled=!0,a.savedHashes=[],a.isLastHash=function(t){var e,n=a.getHashByIndex();return e=t===n},a.saveHash=function(t){return a.isLastHash(t)?!1:(a.savedHashes.push(t),!0)},a.getHashByIndex=function(t){var e=null;return e="undefined"==typeof t?a.savedHashes[a.savedHashes.length-1]:0>t?a.savedHashes[a.savedHashes.length+t]:a.savedHashes[t]},a.discardedHashes={},a.discardedStates={},a.discardState=function(t,e,n){var i,r=a.getHashByState(t);return i={discardedState:t,backState:n,forwardState:e},a.discardedStates[r]=i,!0},a.discardHash=function(t,e,n){var i={discardedHash:t,backState:n,forwardState:e};return a.discardedHashes[t]=i,!0},a.discardedState=function(t){var e,n=a.getHashByState(t);return e=a.discardedStates[n]||!1},a.discardedHash=function(t){var e=a.discardedHashes[t]||!1;return e},a.recycleState=function(t){var e=a.getHashByState(t);return a.discardedState(t)&&delete a.discardedStates[e],!0},a.emulated.hashChange&&(a.hashChangeInit=function(){a.checkerFunction=null;var n,i,o,s,l="";return a.isInternetExplorer()?(n="historyjs-iframe",i=e.createElement("iframe"),i.setAttribute("id",n),i.style.display="none",e.body.appendChild(i),i.contentWindow.document.open(),i.contentWindow.document.close(),o="",s=!1,a.checkerFunction=function(){if(s)return!1;s=!0;var e=a.getHash()||"",n=a.unescapeHash(i.contentWindow.document.location.hash)||"";return e!==l?(l=e,n!==e&&(o=n=e,i.contentWindow.document.open(),i.contentWindow.document.close(),i.contentWindow.document.location.hash=a.escapeHash(e)),a.Adapter.trigger(t,"hashchange")):n!==o&&(o=n,a.setHash(n,!1)),s=!1,!0}):a.checkerFunction=function(){var e=a.getHash();return e!==l&&(l=e,a.Adapter.trigger(t,"hashchange")),!0},a.intervalList.push(r(a.checkerFunction,a.options.hashChangeInterval)),!0},a.Adapter.onDomLoad(a.hashChangeInit)),a.emulated.pushState&&(a.onHashChange=function(n){var i,r=n&&n.newURL||e.location.href,o=a.getHashByUrl(r),s=null,l=null;return a.isLastHash(o)?(a.busy(!1),!1):(a.doubleCheckComplete(),a.saveHash(o),o&&a.isTraditionalAnchor(o)?(a.Adapter.trigger(t,"anchorchange"),a.busy(!1),!1):(s=a.extractState(a.getFullUrl(o||e.location.href,!1),!0),a.isLastSavedState(s)?(a.busy(!1),!1):(l=a.getHashByState(s),i=a.discardedState(s),i?(a.getHashByIndex(-2)===a.getHashByState(i.forwardState)?a.back(!1):a.forward(!1),!1):(a.pushState(s.data,s.title,s.url,!1),!0))))},a.Adapter.bind(t,"hashchange",a.onHashChange),a.pushState=function(n,i,r,o){if(a.getHashByUrl(r))throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(o!==!1&&a.busy())return a.pushQueue({scope:a,callback:a.pushState,args:arguments,queue:o}),!1;a.busy(!0);var s=a.createStateObject(n,i,r),l=a.getHashByState(s),u=a.getState(!1),c=a.getHashByState(u),d=a.getHash();return a.storeState(s),a.expectedStateId=s.id,a.recycleState(s),a.setTitle(s),l===c?(a.busy(!1),!1):l!==d&&l!==a.getShortUrl(e.location.href)?(a.setHash(l,!1),!1):(a.saveState(s),a.Adapter.trigger(t,"statechange"),a.busy(!1),!0)},a.replaceState=function(t,e,n,i){if(a.getHashByUrl(n))throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(i!==!1&&a.busy())return a.pushQueue({scope:a,callback:a.replaceState,args:arguments,queue:i}),!1;a.busy(!0);var r=a.createStateObject(t,e,n),o=a.getState(!1),s=a.getStateByIndex(-2);return a.discardState(o,r,s),a.pushState(r.data,r.title,r.url,!1),!0}),a.emulated.pushState&&a.getHash()&&!a.emulated.hashChange&&a.Adapter.onDomLoad(function(){a.Adapter.trigger(t,"hashchange")}),void 0)},"undefined"!=typeof a.init&&a.init()}(window),function(t,e){"use strict";var n=t.console||e,i=t.document,r=t.navigator,a=t.sessionStorage||!1,o=t.setTimeout,s=t.clearTimeout,l=t.setInterval,u=t.clearInterval,c=t.JSON,d=t.alert,h=t.History=t.History||{},f=t.history;if(c.stringify=c.stringify||c.encode,c.parse=c.parse||c.decode,"undefined"!=typeof h.init)throw new Error("History.js Core has already been loaded...");h.init=function(){return"undefined"==typeof h.Adapter?!1:("undefined"!=typeof h.initCore&&h.initCore(),"undefined"!=typeof h.initHtml4&&h.initHtml4(),!0)},h.initCore=function(){if("undefined"!=typeof h.initCore.initialized)return!1;if(h.initCore.initialized=!0,h.options=h.options||{},h.options.hashChangeInterval=h.options.hashChangeInterval||100,h.options.safariPollInterval=h.options.safariPollInterval||500,h.options.doubleCheckInterval=h.options.doubleCheckInterval||500,h.options.storeInterval=h.options.storeInterval||1e3,h.options.busyDelay=h.options.busyDelay||250,h.options.debug=h.options.debug||!1,h.options.initialTitle=h.options.initialTitle||i.title,h.intervalList=[],h.clearAllIntervals=function(){var t,e=h.intervalList;if("undefined"!=typeof e&&null!==e){for(t=0;t<e.length;t++)u(e[t]);h.intervalList=null}},h.debug=function(){(h.options.debug||!1)&&h.log.apply(h,arguments)},h.log=function(){var t,e,r,a,o,s="undefined"!=typeof n&&"undefined"!=typeof n.log&&"undefined"!=typeof n.log.apply,l=i.getElementById("log");for(s?(a=Array.prototype.slice.call(arguments),t=a.shift(),"undefined"!=typeof n.debug?n.debug.apply(n,[t,a]):n.log.apply(n,[t,a])):t="\n"+arguments[0]+"\n",e=1,r=arguments.length;r>e;++e){if(o=arguments[e],"object"==typeof o&&"undefined"!=typeof c)try{o=c.stringify(o)}catch(u){}t+="\n"+o+"\n"}return l?(l.value+=t+"\n-----\n",l.scrollTop=l.scrollHeight-l.clientHeight):s||d(t),!0},h.getInternetExplorerMajorVersion=function(){var t=h.getInternetExplorerMajorVersion.cached="undefined"!=typeof h.getInternetExplorerMajorVersion.cached?h.getInternetExplorerMajorVersion.cached:function(){for(var t=3,e=i.createElement("div"),n=e.getElementsByTagName("i");(e.innerHTML="<!--[if gt IE "+ ++t+"]><i></i><![endif]-->")&&n[0];);return t>4?t:!1}();return t},h.isInternetExplorer=function(){var t=h.isInternetExplorer.cached="undefined"!=typeof h.isInternetExplorer.cached?h.isInternetExplorer.cached:Boolean(h.getInternetExplorerMajorVersion());return t},h.emulated={pushState:!Boolean(t.history&&t.history.pushState&&t.history.replaceState&&!/ Mobile\/([1-7][a-z]|(8([abcde]|f(1[0-8]))))/i.test(r.userAgent)&&!/AppleWebKit\/5([0-2]|3[0-2])/i.test(r.userAgent)),hashChange:Boolean(!("onhashchange"in t||"onhashchange"in i)||h.isInternetExplorer()&&h.getInternetExplorerMajorVersion()<8)},h.enabled=!h.emulated.pushState,h.bugs={setHash:Boolean(!h.emulated.pushState&&"Apple Computer, Inc."===r.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(r.userAgent)),safariPoll:Boolean(!h.emulated.pushState&&"Apple Computer, Inc."===r.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(r.userAgent)),ieDoubleCheck:Boolean(h.isInternetExplorer()&&h.getInternetExplorerMajorVersion()<8),hashEscape:Boolean(h.isInternetExplorer()&&h.getInternetExplorerMajorVersion()<7)},h.isEmptyObject=function(t){for(var e in t)return!1;return!0},h.cloneObject=function(t){var e,n;return t?(e=c.stringify(t),n=c.parse(e)):n={},n},h.getRootUrl=function(){var t=i.location.protocol+"//"+(i.location.hostname||i.location.host);return i.location.port&&(t+=":"+i.location.port),t+="/"},h.getBaseHref=function(){var t=i.getElementsByTagName("base"),e=null,n="";return 1===t.length&&(e=t[0],n=e.href.replace(/[^\/]+$/,"")),n=n.replace(/\/+$/,""),n&&(n+="/"),n},h.getBaseUrl=function(){var t=h.getBaseHref()||h.getBasePageUrl()||h.getRootUrl();return t},h.getPageUrl=function(){var t,e=h.getState(!1,!1),n=(e||{}).url||i.location.href;return t=n.replace(/\/+$/,"").replace(/[^\/]+$/,function(t){return/\./.test(t)?t:t+"/"})},h.getBasePageUrl=function(){var t=i.location.href.replace(/[#\?].*/,"").replace(/[^\/]+$/,function(t){return/[^\/]$/.test(t)?"":t}).replace(/\/+$/,"")+"/";return t},h.getFullUrl=function(t,e){var n=t,i=t.substring(0,1);return e="undefined"==typeof e?!0:e,/[a-z]+\:\/\//.test(t)||(n="/"===i?h.getRootUrl()+t.replace(/^\/+/,""):"#"===i?h.getPageUrl().replace(/#.*/,"")+t:"?"===i?h.getPageUrl().replace(/[\?#].*/,"")+t:e?h.getBaseUrl()+t.replace(/^(\.\/)+/,""):h.getBasePageUrl()+t.replace(/^(\.\/)+/,"")),n.replace(/\#$/,"")},h.getShortUrl=function(t){var e=t,n=h.getBaseUrl(),i=h.getRootUrl();return h.emulated.pushState&&(e=e.replace(n,"")),e=e.replace(i,"/"),h.isTraditionalAnchor(e)&&(e="./"+e),e=e.replace(/^(\.\/)+/g,"./").replace(/\#$/,"")},h.store={},h.idToState=h.idToState||{},h.stateToId=h.stateToId||{},h.urlToId=h.urlToId||{},h.storedStates=h.storedStates||[],h.savedStates=h.savedStates||[],h.normalizeStore=function(){h.store.idToState=h.store.idToState||{},h.store.urlToId=h.store.urlToId||{},h.store.stateToId=h.store.stateToId||{}},h.getState=function(t,e){"undefined"==typeof t&&(t=!0),"undefined"==typeof e&&(e=!0);var n=h.getLastSavedState();return!n&&e&&(n=h.createStateObject()),t&&(n=h.cloneObject(n),n.url=n.cleanUrl||n.url),n},h.getIdByState=function(t){var e,n=h.extractId(t.url);if(!n)if(e=h.getStateString(t),"undefined"!=typeof h.stateToId[e])n=h.stateToId[e];else if("undefined"!=typeof h.store.stateToId[e])n=h.store.stateToId[e];else{for(;n=(new Date).getTime()+String(Math.random()).replace(/\D/g,""),"undefined"!=typeof h.idToState[n]||"undefined"!=typeof h.store.idToState[n];);h.stateToId[e]=n,h.idToState[n]=t}return n},h.normalizeState=function(t){var e,n;return t&&"object"==typeof t||(t={}),"undefined"!=typeof t.normalized?t:(t.data&&"object"==typeof t.data||(t.data={}),e={},e.normalized=!0,e.title=t.title||"",e.url=h.getFullUrl(h.unescapeString(t.url||i.location.href)),e.hash=h.getShortUrl(e.url),e.data=h.cloneObject(t.data),e.id=h.getIdByState(e),e.cleanUrl=e.url.replace(/\??\&_suid.*/,""),e.url=e.cleanUrl,n=!h.isEmptyObject(e.data),(e.title||n)&&(e.hash=h.getShortUrl(e.url).replace(/\??\&_suid.*/,""),/\?/.test(e.hash)||(e.hash+="?"),e.hash+="&_suid="+e.id),e.hashedUrl=h.getFullUrl(e.hash),(h.emulated.pushState||h.bugs.safariPoll)&&h.hasUrlDuplicate(e)&&(e.url=e.hashedUrl),e)},h.createStateObject=function(t,e,n){var i={data:t,title:e,url:n};return i=h.normalizeState(i)},h.getStateById=function(t){t=String(t);var n=h.idToState[t]||h.store.idToState[t]||e;return n},h.getStateString=function(t){var e,n,i;return e=h.normalizeState(t),n={data:e.data,title:t.title,url:t.url},i=c.stringify(n)},h.getStateId=function(t){var e,n;return e=h.normalizeState(t),n=e.id},h.getHashByState=function(t){var e,n;return e=h.normalizeState(t),n=e.hash},h.extractId=function(t){var e,n,i;return n=/(.*)\&_suid=([0-9]+)$/.exec(t),i=n?n[1]||t:t,e=n?String(n[2]||""):"",e||!1},h.isTraditionalAnchor=function(t){var e=!/[\/\?\.]/.test(t);return e},h.extractState=function(t,e){var n,i,r=null;return e=e||!1,n=h.extractId(t),n&&(r=h.getStateById(n)),r||(i=h.getFullUrl(t),n=h.getIdByUrl(i)||!1,n&&(r=h.getStateById(n)),!r&&e&&!h.isTraditionalAnchor(t)&&(r=h.createStateObject(null,null,i))),r},h.getIdByUrl=function(t){var n=h.urlToId[t]||h.store.urlToId[t]||e;return n},h.getLastSavedState=function(){return h.savedStates[h.savedStates.length-1]||e},h.getLastStoredState=function(){return h.storedStates[h.storedStates.length-1]||e},h.hasUrlDuplicate=function(t){var e,n=!1;return e=h.extractState(t.url),n=e&&e.id!==t.id},h.storeState=function(t){return h.urlToId[t.url]=t.id,h.storedStates.push(h.cloneObject(t)),t},h.isLastSavedState=function(t){var e,n,i,r=!1;return h.savedStates.length&&(e=t.id,n=h.getLastSavedState(),i=n.id,r=e===i),r},h.saveState=function(t){return h.isLastSavedState(t)?!1:(h.savedStates.push(h.cloneObject(t)),!0)},h.getStateByIndex=function(t){var e=null;return e="undefined"==typeof t?h.savedStates[h.savedStates.length-1]:0>t?h.savedStates[h.savedStates.length+t]:h.savedStates[t]},h.getHash=function(){var t=h.unescapeHash(i.location.hash);return t},h.unescapeString=function(e){for(var n,i=e;n=t.unescape(i),n!==i;)i=n;return i},h.unescapeHash=function(t){var e=h.normalizeHash(t);return e=h.unescapeString(e)},h.normalizeHash=function(t){var e=t.replace(/[^#]*#/,"").replace(/#.*/,"");return e},h.setHash=function(t,e){var n,r,a;return e!==!1&&h.busy()?(h.pushQueue({scope:h,callback:h.setHash,args:arguments,queue:e}),!1):(n=h.escapeHash(t),h.busy(!0),r=h.extractState(t,!0),r&&!h.emulated.pushState?h.pushState(r.data,r.title,r.url,!1):i.location.hash!==n&&(h.bugs.setHash?(a=h.getPageUrl(),h.pushState(null,null,a+"#"+n,!1)):i.location.hash=n),h)},h.escapeHash=function(e){var n=h.normalizeHash(e);return n=t.escape(n),h.bugs.hashEscape||(n=n.replace(/\%21/g,"!").replace(/\%26/g,"&").replace(/\%3D/g,"=").replace(/\%3F/g,"?")),n},h.getHashByUrl=function(t){var e=String(t).replace(/([^#]*)#?([^#]*)#?(.*)/,"$2");return e=h.unescapeHash(e)},h.setTitle=function(t){var e,n=t.title;n||(e=h.getStateByIndex(0),e&&e.url===t.url&&(n=e.title||h.options.initialTitle));try{i.getElementsByTagName("title")[0].innerHTML=n.replace("<","&lt;").replace(">","&gt;").replace(" & "," &amp; ")}catch(r){}return i.title=n,h},h.queues=[],h.busy=function(t){if("undefined"!=typeof t?h.busy.flag=t:"undefined"==typeof h.busy.flag&&(h.busy.flag=!1),!h.busy.flag){s(h.busy.timeout);var e=function(){var t,n,i;if(!h.busy.flag)for(t=h.queues.length-1;t>=0;--t)n=h.queues[t],0!==n.length&&(i=n.shift(),h.fireQueueItem(i),h.busy.timeout=o(e,h.options.busyDelay))};h.busy.timeout=o(e,h.options.busyDelay)}return h.busy.flag},h.busy.flag=!1,h.fireQueueItem=function(t){return t.callback.apply(t.scope||h,t.args||[])},h.pushQueue=function(t){return h.queues[t.queue||0]=h.queues[t.queue||0]||[],h.queues[t.queue||0].push(t),h},h.queue=function(t,e){return"function"==typeof t&&(t={callback:t}),"undefined"!=typeof e&&(t.queue=e),h.busy()?h.pushQueue(t):h.fireQueueItem(t),h},h.clearQueue=function(){return h.busy.flag=!1,h.queues=[],h},h.stateChanged=!1,h.doubleChecker=!1,h.doubleCheckComplete=function(){return h.stateChanged=!0,h.doubleCheckClear(),h},h.doubleCheckClear=function(){return h.doubleChecker&&(s(h.doubleChecker),h.doubleChecker=!1),h},h.doubleCheck=function(t){return h.stateChanged=!1,h.doubleCheckClear(),h.bugs.ieDoubleCheck&&(h.doubleChecker=o(function(){return h.doubleCheckClear(),h.stateChanged||t(),!0},h.options.doubleCheckInterval)),h},h.safariStatePoll=function(){var e,n=h.extractState(i.location.href);if(!h.isLastSavedState(n))return e=n,e||(e=h.createStateObject()),h.Adapter.trigger(t,"popstate"),h},h.back=function(t){return t!==!1&&h.busy()?(h.pushQueue({scope:h,callback:h.back,args:arguments,queue:t}),!1):(h.busy(!0),h.doubleCheck(function(){h.back(!1)}),f.go(-1),!0)},h.forward=function(t){return t!==!1&&h.busy()?(h.pushQueue({scope:h,callback:h.forward,args:arguments,queue:t}),!1):(h.busy(!0),h.doubleCheck(function(){h.forward(!1)}),f.go(1),!0)},h.go=function(t,e){var n;if(t>0)for(n=1;t>=n;++n)h.forward(e);else{if(!(0>t))throw new Error("History.go: History.go requires a positive or negative integer passed.");for(n=-1;n>=t;--n)h.back(e)}return h},h.emulated.pushState){var p=function(){};h.pushState=h.pushState||p,h.replaceState=h.replaceState||p}else h.onPopState=function(e,n){var r,a,o=!1,s=!1;return h.doubleCheckComplete(),r=h.getHash(),r?(a=h.extractState(r||i.location.href,!0),a?h.replaceState(a.data,a.title,a.url,!1):(h.Adapter.trigger(t,"anchorchange"),h.busy(!1)),h.expectedStateId=!1,!1):(o=h.Adapter.extractEventData("state",e,n)||!1,s=o?h.getStateById(o):h.expectedStateId?h.getStateById(h.expectedStateId):h.extractState(i.location.href),s||(s=h.createStateObject(null,null,i.location.href)),h.expectedStateId=!1,h.isLastSavedState(s)?(h.busy(!1),!1):(h.storeState(s),h.saveState(s),h.setTitle(s),h.Adapter.trigger(t,"statechange"),h.busy(!1),!0))},h.Adapter.bind(t,"popstate",h.onPopState),h.pushState=function(e,n,i,r){if(h.getHashByUrl(i)&&h.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(r!==!1&&h.busy())return h.pushQueue({scope:h,callback:h.pushState,args:arguments,queue:r}),!1;h.busy(!0);var a=h.createStateObject(e,n,i);return h.isLastSavedState(a)?h.busy(!1):(h.storeState(a),h.expectedStateId=a.id,f.pushState(a.id,a.title,a.url),h.Adapter.trigger(t,"popstate")),!0},h.replaceState=function(e,n,i,r){if(h.getHashByUrl(i)&&h.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(r!==!1&&h.busy())return h.pushQueue({scope:h,callback:h.replaceState,args:arguments,queue:r}),!1;h.busy(!0);var a=h.createStateObject(e,n,i);return h.isLastSavedState(a)?h.busy(!1):(h.storeState(a),h.expectedStateId=a.id,f.replaceState(a.id,a.title,a.url),h.Adapter.trigger(t,"popstate")),!0};if(a){try{h.store=c.parse(a.getItem("History.store"))||{}}catch(g){h.store={}}h.normalizeStore()}else h.store={},h.normalizeStore();h.Adapter.bind(t,"beforeunload",h.clearAllIntervals),h.Adapter.bind(t,"unload",h.clearAllIntervals),h.saveState(h.storeState(h.extractState(i.location.href,!0))),a&&(h.onUnload=function(){var t,e;try{t=c.parse(a.getItem("History.store"))||{}}catch(n){t={}}t.idToState=t.idToState||{},t.urlToId=t.urlToId||{},t.stateToId=t.stateToId||{};for(e in h.idToState)h.idToState.hasOwnProperty(e)&&(t.idToState[e]=h.idToState[e]);for(e in h.urlToId)h.urlToId.hasOwnProperty(e)&&(t.urlToId[e]=h.urlToId[e]);for(e in h.stateToId)h.stateToId.hasOwnProperty(e)&&(t.stateToId[e]=h.stateToId[e]);h.store=t,h.normalizeStore(),a.setItem("History.store",c.stringify(t))},h.intervalList.push(l(h.onUnload,h.options.storeInterval)),h.Adapter.bind(t,"beforeunload",h.onUnload),h.Adapter.bind(t,"unload",h.onUnload)),h.emulated.pushState||(h.bugs.safariPoll&&h.intervalList.push(l(h.safariStatePoll,h.options.safariPollInterval)),("Apple Computer, Inc."===r.vendor||"Mozilla"===(r.appCodeName||""))&&(h.Adapter.bind(t,"hashchange",function(){h.Adapter.trigger(t,"popstate")}),h.getHash()&&h.Adapter.onDomLoad(function(){h.Adapter.trigger(t,"hashchange")})))},h.init()}(window),function(t,e){function n(e){return!t(e).parents().andSelf().filter(function(){return"hidden"===t.curCSS(this,"visibility")||t.expr.filters.hidden(this)}).length}function i(e,i){var r=e.nodeName.toLowerCase();if("area"===r){var a,o=e.parentNode,s=o.name;return e.href&&s&&"map"===o.nodeName.toLowerCase()?(a=t("img[usemap=#"+s+"]")[0],!!a&&n(a)):!1}return(/input|select|textarea|button|object/.test(r)?!e.disabled:"a"==r?e.href||i:i)&&n(e)}t.ui=t.ui||{},t.ui.version||(t.extend(t.ui,{version:"1.8.17",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),t.fn.extend({propAttr:t.fn.prop||t.fn.attr,_focus:t.fn.focus,focus:function(e,n){return"number"==typeof e?this.each(function(){var i=this;setTimeout(function(){t(i).focus(),n&&n.call(i)},e)}):this._focus.apply(this,arguments)},scrollParent:function(){var e;return e=t.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(t.curCSS(this,"position",1))&&/(auto|scroll)/.test(t.curCSS(this,"overflow",1)+t.curCSS(this,"overflow-y",1)+t.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(t.curCSS(this,"overflow",1)+t.curCSS(this,"overflow-y",1)+t.curCSS(this,"overflow-x",1))}).eq(0),/fixed/.test(this.css("position"))||!e.length?t(document):e},zIndex:function(n){if(n!==e)return this.css("zIndex",n);if(this.length)for(var i,r,a=t(this[0]);a.length&&a[0]!==document;){if(i=a.css("position"),("absolute"===i||"relative"===i||"fixed"===i)&&(r=parseInt(a.css("zIndex"),10),!isNaN(r)&&0!==r))return r;a=a.parent()}return 0},disableSelection:function(){return this.bind((t.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(t){t.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),t.each(["Width","Height"],function(n,i){function r(e,n,i,r){return t.each(a,function(){n-=parseFloat(t.curCSS(e,"padding"+this,!0))||0,i&&(n-=parseFloat(t.curCSS(e,"border"+this+"Width",!0))||0),r&&(n-=parseFloat(t.curCSS(e,"margin"+this,!0))||0)}),n}var a="Width"===i?["Left","Right"]:["Top","Bottom"],o=i.toLowerCase(),s={innerWidth:t.fn.innerWidth,innerHeight:t.fn.innerHeight,outerWidth:t.fn.outerWidth,outerHeight:t.fn.outerHeight};t.fn["inner"+i]=function(n){return n===e?s["inner"+i].call(this):this.each(function(){t(this).css(o,r(this,n)+"px")})},t.fn["outer"+i]=function(e,n){return"number"!=typeof e?s["outer"+i].call(this,e):this.each(function(){t(this).css(o,r(this,e,!0,n)+"px")})}}),t.extend(t.expr[":"],{data:function(e,n,i){return!!t.data(e,i[3])},focusable:function(e){return i(e,!isNaN(t.attr(e,"tabindex")))},tabbable:function(e){var n=t.attr(e,"tabindex"),r=isNaN(n);return(r||n>=0)&&i(e,!r)}}),t(function(){var e=document.body,n=e.appendChild(n=document.createElement("div"));t.extend(n.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),t.support.minHeight=100===n.offsetHeight,t.support.selectstart="onselectstart"in n,e.removeChild(n).style.display="none"}),t.extend(t.ui,{plugin:{add:function(e,n,i){var r=t.ui[e].prototype;for(var a in i)r.plugins[a]=r.plugins[a]||[],r.plugins[a].push([n,i[a]])},call:function(t,e,n){var i=t.plugins[e];if(i&&t.element[0].parentNode)for(var r=0;r<i.length;r++)t.options[i[r][0]]&&i[r][1].apply(t.element,n)}},contains:function(t,e){return document.compareDocumentPosition?16&t.compareDocumentPosition(e):t!==e&&t.contains(e)},hasScroll:function(e,n){if("hidden"===t(e).css("overflow"))return!1;var i=n&&"left"===n?"scrollLeft":"scrollTop",r=!1;return e[i]>0?!0:(e[i]=1,r=e[i]>0,e[i]=0,r)},isOverAxis:function(t,e,n){return t>e&&e+n>t},isOver:function(e,n,i,r,a,o){return t.ui.isOverAxis(e,i,a)&&t.ui.isOverAxis(n,r,o)}}))}(jQuery),function(t,e){if(t.cleanData){var n=t.cleanData;t.cleanData=function(e){for(var i,r=0;null!=(i=e[r]);r++)try{t(i).triggerHandler("remove")}catch(a){}n(e)}}else{var i=t.fn.remove;t.fn.remove=function(e,n){return this.each(function(){return n||(!e||t.filter(e,[this]).length)&&t("*",this).add([this]).each(function(){try{t(this).triggerHandler("remove")}catch(e){}}),i.call(t(this),e,n)})}}t.widget=function(e,n,i){var r,a=e.split(".")[0];e=e.split(".")[1],r=a+"-"+e,i||(i=n,n=t.Widget),t.expr[":"][r]=function(n){return!!t.data(n,e)},t[a]=t[a]||{},t[a][e]=function(t,e){arguments.length&&this._createWidget(t,e)};var o=new n;o.options=t.extend(!0,{},o.options),t[a][e].prototype=t.extend(!0,o,{namespace:a,widgetName:e,widgetEventPrefix:t[a][e].prototype.widgetEventPrefix||e,widgetBaseClass:r},i),t.widget.bridge(e,t[a][e])},t.widget.bridge=function(n,i){t.fn[n]=function(r){var a="string"==typeof r,o=Array.prototype.slice.call(arguments,1),s=this;return r=!a&&o.length?t.extend.apply(null,[!0,r].concat(o)):r,a&&"_"===r.charAt(0)?s:(this.each(a?function(){var i=t.data(this,n),a=i&&t.isFunction(i[r])?i[r].apply(i,o):i;return a!==i&&a!==e?(s=a,!1):void 0}:function(){var e=t.data(this,n);e?e.option(r||{})._init():t.data(this,n,new i(r,this))}),s)}},t.Widget=function(t,e){arguments.length&&this._createWidget(t,e)},t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(e,n){t.data(n,this.widgetName,this),this.element=t(n),this.options=t.extend(!0,{},this.options,this._getCreateOptions(),e);var i=this;this.element.bind("remove."+this.widgetName,function(){i.destroy()}),this._create(),this._trigger("create"),this._init()},_getCreateOptions:function(){return t.metadata&&t.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName),this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(n,i){var r=n;if(0===arguments.length)return t.extend({},this.options);if("string"==typeof n){if(i===e)return this.options[n];r={},r[n]=i}return this._setOptions(r),this},_setOptions:function(e){var n=this;return t.each(e,function(t,e){n._setOption(t,e)}),this},_setOption:function(t,e){return this.options[t]=e,"disabled"===t&&this.widget()[e?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",e),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(e,n,i){var r,a,o=this.options[e];if(i=i||{},n=t.Event(n),n.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),n.target=this.element[0],a=n.originalEvent,a)for(r in a)r in n||(n[r]=a[r]);return this.element.trigger(n,i),!(t.isFunction(o)&&o.call(this.element[0],n,i)===!1||n.isDefaultPrevented())}}}(jQuery),function(t){var e=!1;t(document).mouseup(function(){e=!1}),t.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.bind("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).bind("click."+this.widgetName,function(n){return!0===t.data(n.target,e.widgetName+".preventClickEvent")?(t.removeData(n.target,e.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName)},_mouseDown:function(n){if(!e){this._mouseStarted&&this._mouseUp(n),this._mouseDownEvent=n;var i=this,r=1==n.which,a="string"==typeof this.options.cancel&&n.target.nodeName?t(n.target).closest(this.options.cancel).length:!1;return r&&!a&&this._mouseCapture(n)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(n)&&this._mouseDelayMet(n)&&(this._mouseStarted=this._mouseStart(n)!==!1,!this._mouseStarted)?(n.preventDefault(),!0):(!0===t.data(n.target,this.widgetName+".preventClickEvent")&&t.removeData(n.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return i._mouseMove(t)},this._mouseUpDelegate=function(t){return i._mouseUp(t)},t(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),n.preventDefault(),e=!0,!0)):!0}},_mouseMove:function(e){return!t.browser.msie||document.documentMode>=9||e.button?this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,e)!==!1,this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted):this._mouseUp(e)},_mouseUp:function(e){return t(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target==this._mouseDownEvent.target&&t.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),!1},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(t){t.widget("ui.draggable",t.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){"original"==this.options.helper&&!/^(?:r|a|f)/.test(this.element.css("position"))&&(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},destroy:function(){return this.element.data("draggable")?(this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy(),this):void 0},_mouseCapture:function(e){var n=this.options;return this.helper||n.disabled||t(e.target).is(".ui-resizable-handle")?!1:(this.handle=this._getHandle(e),this.handle?(n.iframeFix&&t(n.iframeFix===!0?"iframe":n.iframeFix).each(function(){t('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(t(this).offset()).appendTo("body")
}),!0):!1)},_mouseStart:function(e){var n=this.options;return this.helper=this._createHelper(e),this._cacheHelperProportions(),t.ui.ddmanager&&(t.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),n.containment&&this._setContainment(),this._trigger("start",e)===!1?(this._clear(),!1):(this._cacheHelperProportions(),t.ui.ddmanager&&!n.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this.helper.addClass("ui-draggable-dragging"),this._mouseDrag(e,!0),t.ui.ddmanager&&t.ui.ddmanager.dragStart(this,e),!0)},_mouseDrag:function(e,n){if(this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),!n){var i=this._uiHash();if(this._trigger("drag",e,i)===!1)return this._mouseUp({}),!1;this.position=i.position}return this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px"),t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),!1},_mouseStop:function(e){var n=!1;if(t.ui.ddmanager&&!this.options.dropBehaviour&&(n=t.ui.ddmanager.drop(this,e)),this.dropped&&(n=this.dropped,this.dropped=!1),!(this.element[0]&&this.element[0].parentNode||"original"!=this.options.helper))return!1;if("invalid"==this.options.revert&&!n||"valid"==this.options.revert&&n||this.options.revert===!0||t.isFunction(this.options.revert)&&this.options.revert.call(this.element,n)){var i=this;t(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){i._trigger("stop",e)!==!1&&i._clear()})}else this._trigger("stop",e)!==!1&&this._clear();return!1},_mouseUp:function(e){return this.options.iframeFix===!0&&t("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),t.ui.ddmanager&&t.ui.ddmanager.dragStop(this,e),t.ui.mouse.prototype._mouseUp.call(this,e)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(e){var n=this.options.handle&&t(this.options.handle,this.element).length?!1:!0;return t(this.options.handle,this.element).find("*").andSelf().each(function(){this==e.target&&(n=!0)}),n},_createHelper:function(e){var n=this.options,i=t.isFunction(n.helper)?t(n.helper.apply(this.element[0],[e])):"clone"==n.helper?this.element.clone().removeAttr("id"):this.element;return i.parents("body").length||i.appendTo("parent"==n.appendTo?this.element[0].parentNode:n.appendTo),i[0]!=this.element[0]&&!/(fixed|absolute)/.test(i.css("position"))&&i.css("position","absolute"),i},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var e=this.offsetParent.offset();return"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&t.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&t.browser.msie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var t=this.element.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e=this.options;if("parent"==e.containment&&(e.containment=this.helper[0].parentNode),("document"==e.containment||"window"==e.containment)&&(this.containment=["document"==e.containment?0:t(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,"document"==e.containment?0:t(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,("document"==e.containment?0:t(window).scrollLeft())+t("document"==e.containment?document:window).width()-this.helperProportions.width-this.margins.left,("document"==e.containment?0:t(window).scrollTop())+(t("document"==e.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(e.containment)||e.containment.constructor==Array)e.containment.constructor==Array&&(this.containment=e.containment);else{var n=t(e.containment),i=n[0];if(!i)return;var r=(n.offset(),"hidden"!=t(i).css("overflow"));this.containment=[(parseInt(t(i).css("borderLeftWidth"),10)||0)+(parseInt(t(i).css("paddingLeft"),10)||0),(parseInt(t(i).css("borderTopWidth"),10)||0)+(parseInt(t(i).css("paddingTop"),10)||0),(r?Math.max(i.scrollWidth,i.offsetWidth):i.offsetWidth)-(parseInt(t(i).css("borderLeftWidth"),10)||0)-(parseInt(t(i).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(r?Math.max(i.scrollHeight,i.offsetHeight):i.offsetHeight)-(parseInt(t(i).css("borderTopWidth"),10)||0)-(parseInt(t(i).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=n}},_convertPositionTo:function(e,n){n||(n=this.position);var i="absolute"==e?1:-1,r=(this.options,"absolute"!=this.cssPosition||this.scrollParent[0]!=document&&t.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent),a=/(html|body)/i.test(r[0].tagName);return{top:n.top+this.offset.relative.top*i+this.offset.parent.top*i-(t.browser.safari&&t.browser.version<526&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollTop():a?0:r.scrollTop())*i),left:n.left+this.offset.relative.left*i+this.offset.parent.left*i-(t.browser.safari&&t.browser.version<526&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():a?0:r.scrollLeft())*i)}},_generatePosition:function(e){var n=this.options,i="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&t.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,r=/(html|body)/i.test(i[0].tagName),a=e.pageX,o=e.pageY;if(this.originalPosition){var s;if(this.containment){if(this.relative_container){var l=this.relative_container.offset();s=[this.containment[0]+l.left,this.containment[1]+l.top,this.containment[2]+l.left,this.containment[3]+l.top]}else s=this.containment;e.pageX-this.offset.click.left<s[0]&&(a=s[0]+this.offset.click.left),e.pageY-this.offset.click.top<s[1]&&(o=s[1]+this.offset.click.top),e.pageX-this.offset.click.left>s[2]&&(a=s[2]+this.offset.click.left),e.pageY-this.offset.click.top>s[3]&&(o=s[3]+this.offset.click.top)}if(n.grid){var u=n.grid[1]?this.originalPageY+Math.round((o-this.originalPageY)/n.grid[1])*n.grid[1]:this.originalPageY;o=s&&(u-this.offset.click.top<s[1]||u-this.offset.click.top>s[3])?u-this.offset.click.top<s[1]?u+n.grid[1]:u-n.grid[1]:u;var c=n.grid[0]?this.originalPageX+Math.round((a-this.originalPageX)/n.grid[0])*n.grid[0]:this.originalPageX;a=s&&(c-this.offset.click.left<s[0]||c-this.offset.click.left>s[2])?c-this.offset.click.left<s[0]?c+n.grid[0]:c-n.grid[0]:c}}return{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(t.browser.safari&&t.browser.version<526&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollTop():r?0:i.scrollTop()),left:a-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(t.browser.safari&&t.browser.version<526&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollLeft():r?0:i.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(e,n,i){return i=i||this._uiHash(),t.ui.plugin.call(this,e,[n,i]),"drag"==e&&(this.positionAbs=this._convertPositionTo("absolute")),t.Widget.prototype._trigger.call(this,e,n,i)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),t.extend(t.ui.draggable,{version:"1.8.17"}),t.ui.plugin.add("draggable","connectToSortable",{start:function(e,n){var i=t(this).data("draggable"),r=i.options,a=t.extend({},n,{item:i.element});i.sortables=[],t(r.connectToSortable).each(function(){var n=t.data(this,"sortable");n&&!n.options.disabled&&(i.sortables.push({instance:n,shouldRevert:n.options.revert}),n.refreshPositions(),n._trigger("activate",e,a))})},stop:function(e,n){var i=t(this).data("draggable"),r=t.extend({},n,{item:i.element});t.each(i.sortables,function(){this.instance.isOver?(this.instance.isOver=0,i.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(e),this.instance.options.helper=this.instance.options._helper,"original"==i.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",e,r))})},drag:function(e,n){var i=t(this).data("draggable"),r=this;t.each(i.sortables,function(){this.instance.positionAbs=i.positionAbs,this.instance.helperProportions=i.helperProportions,this.instance.offset.click=i.offset.click,this.instance._intersectsWith(this.instance.containerCache)?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=t(r).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return n.helper[0]},e.target=this.instance.currentItem[0],this.instance._mouseCapture(e,!0),this.instance._mouseStart(e,!0,!0),this.instance.offset.click.top=i.offset.click.top,this.instance.offset.click.left=i.offset.click.left,this.instance.offset.parent.left-=i.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=i.offset.parent.top-this.instance.offset.parent.top,i._trigger("toSortable",e),i.dropped=this.instance.element,i.currentItem=i.element,this.instance.fromOutside=i),this.instance.currentItem&&this.instance._mouseDrag(e)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",e,this.instance._uiHash(this.instance)),this.instance._mouseStop(e,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),i._trigger("fromSortable",e),i.dropped=!1)})}}),t.ui.plugin.add("draggable","cursor",{start:function(){var e=t("body"),n=t(this).data("draggable").options;e.css("cursor")&&(n._cursor=e.css("cursor")),e.css("cursor",n.cursor)},stop:function(){var e=t(this).data("draggable").options;e._cursor&&t("body").css("cursor",e._cursor)}}),t.ui.plugin.add("draggable","opacity",{start:function(e,n){var i=t(n.helper),r=t(this).data("draggable").options;i.css("opacity")&&(r._opacity=i.css("opacity")),i.css("opacity",r.opacity)},stop:function(e,n){var i=t(this).data("draggable").options;i._opacity&&t(n.helper).css("opacity",i._opacity)}}),t.ui.plugin.add("draggable","scroll",{start:function(){var e=t(this).data("draggable");e.scrollParent[0]!=document&&"HTML"!=e.scrollParent[0].tagName&&(e.overflowOffset=e.scrollParent.offset())},drag:function(e){var n=t(this).data("draggable"),i=n.options,r=!1;n.scrollParent[0]!=document&&"HTML"!=n.scrollParent[0].tagName?(i.axis&&"x"==i.axis||(n.overflowOffset.top+n.scrollParent[0].offsetHeight-e.pageY<i.scrollSensitivity?n.scrollParent[0].scrollTop=r=n.scrollParent[0].scrollTop+i.scrollSpeed:e.pageY-n.overflowOffset.top<i.scrollSensitivity&&(n.scrollParent[0].scrollTop=r=n.scrollParent[0].scrollTop-i.scrollSpeed)),i.axis&&"y"==i.axis||(n.overflowOffset.left+n.scrollParent[0].offsetWidth-e.pageX<i.scrollSensitivity?n.scrollParent[0].scrollLeft=r=n.scrollParent[0].scrollLeft+i.scrollSpeed:e.pageX-n.overflowOffset.left<i.scrollSensitivity&&(n.scrollParent[0].scrollLeft=r=n.scrollParent[0].scrollLeft-i.scrollSpeed))):(i.axis&&"x"==i.axis||(e.pageY-t(document).scrollTop()<i.scrollSensitivity?r=t(document).scrollTop(t(document).scrollTop()-i.scrollSpeed):t(window).height()-(e.pageY-t(document).scrollTop())<i.scrollSensitivity&&(r=t(document).scrollTop(t(document).scrollTop()+i.scrollSpeed))),i.axis&&"y"==i.axis||(e.pageX-t(document).scrollLeft()<i.scrollSensitivity?r=t(document).scrollLeft(t(document).scrollLeft()-i.scrollSpeed):t(window).width()-(e.pageX-t(document).scrollLeft())<i.scrollSensitivity&&(r=t(document).scrollLeft(t(document).scrollLeft()+i.scrollSpeed)))),r!==!1&&t.ui.ddmanager&&!i.dropBehaviour&&t.ui.ddmanager.prepareOffsets(n,e)}}),t.ui.plugin.add("draggable","snap",{start:function(){var e=t(this).data("draggable"),n=e.options;e.snapElements=[],t(n.snap.constructor!=String?n.snap.items||":data(draggable)":n.snap).each(function(){var n=t(this),i=n.offset();this!=e.element[0]&&e.snapElements.push({item:this,width:n.outerWidth(),height:n.outerHeight(),top:i.top,left:i.left})})},drag:function(e,n){for(var i=t(this).data("draggable"),r=i.options,a=r.snapTolerance,o=n.offset.left,s=o+i.helperProportions.width,l=n.offset.top,u=l+i.helperProportions.height,c=i.snapElements.length-1;c>=0;c--){var d=i.snapElements[c].left,h=d+i.snapElements[c].width,f=i.snapElements[c].top,p=f+i.snapElements[c].height;if(o>d-a&&h+a>o&&l>f-a&&p+a>l||o>d-a&&h+a>o&&u>f-a&&p+a>u||s>d-a&&h+a>s&&l>f-a&&p+a>l||s>d-a&&h+a>s&&u>f-a&&p+a>u){if("inner"!=r.snapMode){var g=Math.abs(f-u)<=a,m=Math.abs(p-l)<=a,v=Math.abs(d-s)<=a,y=Math.abs(h-o)<=a;g&&(n.position.top=i._convertPositionTo("relative",{top:f-i.helperProportions.height,left:0}).top-i.margins.top),m&&(n.position.top=i._convertPositionTo("relative",{top:p,left:0}).top-i.margins.top),v&&(n.position.left=i._convertPositionTo("relative",{top:0,left:d-i.helperProportions.width}).left-i.margins.left),y&&(n.position.left=i._convertPositionTo("relative",{top:0,left:h}).left-i.margins.left)}var b=g||m||v||y;if("outer"!=r.snapMode){var g=Math.abs(f-l)<=a,m=Math.abs(p-u)<=a,v=Math.abs(d-o)<=a,y=Math.abs(h-s)<=a;g&&(n.position.top=i._convertPositionTo("relative",{top:f,left:0}).top-i.margins.top),m&&(n.position.top=i._convertPositionTo("relative",{top:p-i.helperProportions.height,left:0}).top-i.margins.top),v&&(n.position.left=i._convertPositionTo("relative",{top:0,left:d}).left-i.margins.left),y&&(n.position.left=i._convertPositionTo("relative",{top:0,left:h-i.helperProportions.width}).left-i.margins.left)}!i.snapElements[c].snapping&&(g||m||v||y||b)&&i.options.snap.snap&&i.options.snap.snap.call(i.element,e,t.extend(i._uiHash(),{snapItem:i.snapElements[c].item})),i.snapElements[c].snapping=g||m||v||y||b}else i.snapElements[c].snapping&&i.options.snap.release&&i.options.snap.release.call(i.element,e,t.extend(i._uiHash(),{snapItem:i.snapElements[c].item})),i.snapElements[c].snapping=!1}}}),t.ui.plugin.add("draggable","stack",{start:function(){var e=t(this).data("draggable").options,n=t.makeArray(t(e.stack)).sort(function(e,n){return(parseInt(t(e).css("zIndex"),10)||0)-(parseInt(t(n).css("zIndex"),10)||0)});if(n.length){var i=parseInt(n[0].style.zIndex)||0;t(n).each(function(t){this.style.zIndex=i+t}),this[0].style.zIndex=i+n.length}}}),t.ui.plugin.add("draggable","zIndex",{start:function(e,n){var i=t(n.helper),r=t(this).data("draggable").options;i.css("zIndex")&&(r._zIndex=i.css("zIndex")),i.css("zIndex",r.zIndex)},stop:function(e,n){var i=t(this).data("draggable").options;i._zIndex&&t(n.helper).css("zIndex",i._zIndex)}})}(jQuery),function(t){t.cookie=function(e,n,i){if(1<arguments.length&&(!/Object/.test(Object.prototype.toString.call(n))||null===n||void 0===n)){if(i=t.extend({},i),(null===n||void 0===n)&&(i.expires=-1),"number"==typeof i.expires){var r=i.expires,a=i.expires=new Date;a.setDate(a.getDate()+r)}return n=""+n,document.cookie=[encodeURIComponent(e),"=",i.raw?n:encodeURIComponent(n),i.expires?"; expires="+i.expires.toUTCString():"",i.path?"; path="+i.path:"",i.domain?"; domain="+i.domain:"",i.secure?"; secure":""].join("")}for(var o,i=n||{},r=i.raw?function(t){return t}:decodeURIComponent,a=document.cookie.split("; "),s=0;o=a[s]&&a[s].split("=");s++)if(r(o[0])===e)return r(o[1]||"");return null}}(jQuery),function(){function t(t){console.log("$f.fireEvent",[].slice.call(t))}function e(t){if(!t||"object"!=typeof t)return t;var n=new t.constructor;for(var i in t)t.hasOwnProperty(i)&&(n[i]=e(t[i]));return n}function n(t,e){if(t){var n,i=0,r=t.length;if(void 0===r){for(n in t)if(e.call(t[n],n,t[n])===!1)break}else for(var a=t[0];r>i&&e.call(a,i,a)!==!1;a=t[++i]);return t}}function i(t){return document.getElementById(t)}function r(t,e,i){return"object"!=typeof e?t:(t&&e&&n(e,function(e,n){i&&"function"==typeof n||(t[e]=n)}),t)}function a(t){var e=t.indexOf(".");if(-1!=e){var i=t.slice(0,e)||"*",r=t.slice(e+1,t.length),a=[];return n(document.getElementsByTagName(i),function(){this.className&&-1!=this.className.indexOf(r)&&a.push(this)}),a}}function o(t){return t=t||window.event,t.preventDefault?(t.stopPropagation(),t.preventDefault()):(t.returnValue=!1,t.cancelBubble=!0),!1}function s(t,e,n){t[e]=t[e]||[],t[e].push(n)}function l(){return"_"+(""+Math.random()).slice(2,10)}function u(a,u,c){function p(){function t(t){var e=I.hasiPadSupport&&I.hasiPadSupport();return!/iPad|iPhone|iPod/i.test(navigator.userAgent)||/.flv$/i.test(C[0].url)||e?(I.isLoaded()||I._fireEvent("onBeforeClick")===!1||I.load(),o(t)):!0}function e(){""!==g.replace(/\s/g,"")?a.addEventListener?a.addEventListener("click",t,!1):a.attachEvent&&a.attachEvent("onclick",t):(a.addEventListener&&a.addEventListener("click",o,!1),I.load())}$f(a)?($f(a).getParent().innerHTML="",b=$f(a).getIndex(),f[b]=I):(f.push(I),b=f.length-1),_=parseInt(a.style.height,10)||a.clientHeight,v=a.id||"fp"+l(),y=u.id||v+"_api",u.id=y,c.playerId=v,"string"==typeof c&&(c={clip:{url:c}}),"string"==typeof c.clip&&(c.clip={url:c.clip}),c.clip=c.clip||{},a.getAttribute("href",2)&&!c.clip.url&&(c.clip.url=a.getAttribute("href",2)),m=new d(c.clip,-1,I),c.playlist=c.playlist||[c.clip];var i=0;n(c.playlist,function(){var t=this;"object"==typeof t&&t.length&&(t={url:""+t}),n(c.clip,function(e,n){void 0!==n&&void 0===t[e]&&"function"!=typeof n&&(t[e]=n)}),c.playlist[i]=t,t=new d(t,i,I),C.push(t),i++}),n(c,function(t,e){"function"==typeof e&&(m[t]?m[t](e):s(E,t,e),delete c[t])}),n(c.plugins,function(t,e){e&&(T[t]=new h(t,e,I))}),c.plugins&&void 0!==c.plugins.controls||(T.controls=new h("controls",null,I)),T.canvas=new h("canvas",null,I),g=a.innerHTML,setTimeout(e,0)}var g,m,v,y,b,S,w,_,I=this,P=null,x=!1,C=[],T={},E={};if(r(I,{id:function(){return v},isLoaded:function(){return null!==P&&void 0!==P.fp_play&&!x},getParent:function(){return a},hide:function(t){return t&&(a.style.height="0px"),I.isLoaded()&&(P.style.height="0px"),I},show:function(){return a.style.height=_+"px",I.isLoaded()&&(P.style.height=w+"px"),I},isHidden:function(){return I.isLoaded()&&0===parseInt(P.style.height,10)},load:function(t){if(!I.isLoaded()&&I._fireEvent("onBeforeLoad")!==!1){var e=function(){g=a.innerHTML,g&&!flashembed.isSupported(u.version)&&(a.innerHTML=""),t&&(t.cached=!0,s(E,"onLoad",t)),flashembed(a,u,{config:c})},i=0;n(f,function(){this.unload(function(){++i==f.length&&e()})})}return I},unload:function(t){if(this.isFullscreen()&&/WebKit/i.test(navigator.userAgent))return t&&t(!1),I;if(""!==g.replace(/\s/g,"")){if(I._fireEvent("onBeforeUnload")===!1)return t&&t(!1),I;x=!0;try{P&&(P.fp_close(),I._fireEvent("onUnload"))}catch(e){}var n=function(){P=null,a.innerHTML=g,x=!1,t&&t(!0)};setTimeout(n,50)}else t&&t(!1);return I},getClip:function(t){return void 0===t&&(t=S),C[t]},getCommonClip:function(){return m},getPlaylist:function(){return C},getPlugin:function(t){var e=T[t];if(!e&&I.isLoaded()){var n=I._api().fp_getPlugin(t);n&&(e=new h(t,n,I),T[t]=e)}return e},getScreen:function(){return I.getPlugin("screen")},getControls:function(){return I.getPlugin("controls")._fireEvent("onUpdate")},getLogo:function(){try{return I.getPlugin("logo")._fireEvent("onUpdate")}catch(t){}},getPlay:function(){return I.getPlugin("play")._fireEvent("onUpdate")},getConfig:function(t){return t?e(c):c},getFlashParams:function(){return u},loadPlugin:function(t,e,n,i){"function"==typeof n&&(i=n,n={});var r=i?l():"_";I._api().fp_loadPlugin(t,e,n,r);var a={};a[r]=i;var o=new h(t,null,I,a);return T[t]=o,o},getState:function(){return I.isLoaded()?P.fp_getState():-1},play:function(t,e){var n=function(){void 0!==t?I._api().fp_play(t,e):I._api().fp_play()};return I.isLoaded()?n():x?setTimeout(function(){I.play(t,e)},50):I.load(function(){n()}),I},getVersion:function(){var t="flowplayer.js 3.2.6";if(I.isLoaded()){var e=P.fp_getVersion();return e.push(t),e}return t},_api:function(){if(!I.isLoaded())throw"Flowplayer "+I.id()+" not loaded when calling an API method";return P},setClip:function(t){return I.setPlaylist([t]),I},getIndex:function(){return b},_swfHeight:function(){return P.clientHeight}}),n("Click*,Load*,Unload*,Keypress*,Volume*,Mute*,Unmute*,PlaylistReplace,ClipAdd,Fullscreen*,FullscreenExit,Error,MouseOver,MouseOut".split(","),function(){var t="on"+this;if(-1!=t.indexOf("*")){t=t.slice(0,t.length-1);var e="onBefore"+t.slice(2);I[e]=function(t){return s(E,e,t),I}}I[t]=function(e){return s(E,t,e),I}}),n("pause,resume,mute,unmute,stop,toggle,seek,getStatus,getVolume,setVolume,getTime,isPaused,isPlaying,startBuffering,stopBuffering,isFullscreen,toggleFullscreen,reset,close,setPlaylist,addClip,playFeed,setKeyboardShortcutsEnabled,isKeyboardShortcutsEnabled".split(","),function(){var t=this;I[t]=function(e,n){if(!I.isLoaded())return I;var i=null;return i=void 0!==e&&void 0!==n?P["fp_"+t](e,n):void 0===e?P["fp_"+t]():P["fp_"+t](e),"undefined"===i||void 0===i?I:i}}),I._fireEvent=function(e){"string"==typeof e&&(e=[e]);var r=e[0],a=e[1],o=e[2],s=e[3],l=0;if(c.debug&&t(e),I.isLoaded()||"onLoad"!=r||"player"!=a||(P=P||i(y),w=I._swfHeight(),n(C,function(){this._fireEvent("onLoad")}),n(T,function(t,e){e._fireEvent("onUpdate")}),m._fireEvent("onLoad")),"onLoad"!=r||"player"==a){if("onError"==r&&("string"==typeof a||"number"==typeof a&&"number"==typeof o)&&(a=o,o=s),"onContextMenu"==r)return void n(c.contextMenu[a],function(t,e){e.call(I)});if("onPluginEvent"!=r&&"onBeforePluginEvent"!=r){if("onPlaylistReplace"==r){C=[];var u=0;n(a,function(){C.push(new d(this,u++,I))})}if("onClipAdd"==r){if(a.isInStream)return;for(a=new d(a,o,I),C.splice(o,0,a),l=o+1;l<C.length;l++)C[l].index++}var h=!0;if("number"==typeof a&&a<C.length){S=a;var f=C[a];f&&(h=f._fireEvent(r,o,s)),f&&h===!1||(h=m._fireEvent(r,o,s,f))}return n(E[r],function(){return h=this.call(I,a,o),this.cached&&E[r].splice(l,1),h===!1?!1:void l++}),h}var p=a.name||a,g=T[p];if(g)return g._fireEvent("onUpdate",a),g._fireEvent(o,e.slice(3))}},"string"==typeof a){var H=i(a);if(!H)throw"Flowplayer cannot access element: "+a;a=H,p()}else p()}function c(t){this.length=t.length,this.each=function(e){n(t,e)},this.size=function(){return t.length}}var d=function(t,e,i){var a=this,o={},u={};if(a.index=e,"string"==typeof t&&(t={url:t}),r(this,t,!0),n("Begin*,Start,Pause*,Resume*,Seek*,Stop*,Finish*,LastSecond,Update,BufferFull,BufferEmpty,BufferStop".split(","),function(){var t="on"+this;if(-1!=t.indexOf("*")){t=t.slice(0,t.length-1);var n="onBefore"+t.slice(2);a[n]=function(t){return s(u,n,t),a}}a[t]=function(e){return s(u,t,e),a},-1==e&&(a[n]&&(i[n]=a[n]),a[t]&&(i[t]=a[t]))}),r(this,{onCuepoint:function(t,n){if(1==arguments.length)return o.embedded=[null,t],a;"number"==typeof t&&(t=[t]);var r=l();return o[r]=[t,n],i.isLoaded()&&i._api().fp_addCuepoints(t,e,r),a},update:function(t){r(a,t),i.isLoaded()&&i._api().fp_updateClip(t,e);var n=i.getConfig(),o=-1==e?n.clip:n.playlist[e];r(o,t,!0)},_fireEvent:function(t,s,l,c){if("onLoad"==t)return n(o,function(t,n){n[0]&&i._api().fp_addCuepoints(n[0],e,t)}),!1;if(c=c||a,"onCuepoint"==t){var d=o[s];if(d)return d[1].call(i,c,l)}s&&-1!="onBeforeBegin,onMetaData,onStart,onUpdate,onResume".indexOf(t)&&(r(c,s),s.metaData&&(c.duration?c.fullDuration=s.metaData.duration:c.duration=s.metaData.duration));var h=!0;return n(u[t],function(){h=this.call(i,c,s,l)}),h}}),t.onCuepoint){var c=t.onCuepoint;a.onCuepoint.apply(a,"function"==typeof c?[c]:c),delete t.onCuepoint}n(t,function(e,n){"function"==typeof n&&(s(u,e,n),delete t[e])}),-1==e&&(i.onCuepoint=this.onCuepoint)},h=function(t,e,i,a){var o=this,s={},u=!1;a&&r(s,a),n(e,function(t,n){"function"==typeof n&&(s[t]=n,delete e[t])}),r(this,{animate:function(n,r,a){if(!n)return o;if("function"==typeof r&&(a=r,r=500),"string"==typeof n){var u=n;n={},n[u]=r,r=500}if(a){var c=l();s[c]=a}return void 0===r&&(r=500),e=i._api().fp_animate(t,n,r,c),o},css:function(n,a){if(void 0!==a){var s={};s[n]=a,n=s}return e=i._api().fp_css(t,n),r(o,e),o},show:function(){return this.display="block",i._api().fp_showPlugin(t),o},hide:function(){return this.display="none",i._api().fp_hidePlugin(t),o},toggle:function(){return this.display=i._api().fp_togglePlugin(t),o},fadeTo:function(e,n,r){if("function"==typeof n&&(r=n,n=500),r){var a=l();s[a]=r}return this.display=i._api().fp_fadeTo(t,e,n,a),this.opacity=e,o},fadeIn:function(t,e){return o.fadeTo(1,t,e)},fadeOut:function(t,e){return o.fadeTo(0,t,e)},getName:function(){return t},getPlayer:function(){return i},_fireEvent:function(e,a){if("onUpdate"==e){var l=i._api().fp_getPlugin(t);if(!l)return;r(o,l),delete o.methods,u||(n(l.methods,function(){var e=""+this;o[e]=function(){var n=[].slice.call(arguments),r=i._api().fp_invoke(t,e,n);return"undefined"===r||void 0===r?o:r}}),u=!0)}var c=s[e];if(c){var d=c.apply(o,a);return"_"==e.slice(0,1)&&delete s[e],d}return o}})},f=[];window.flowplayer=window.$f=function(){var t=null,o=arguments[0];if(!arguments.length)return n(f,function(){return this.isLoaded()?(t=this,!1):void 0}),t||f[0];if(1==arguments.length)return"number"==typeof o?f[o]:"*"==o?new c(f):(n(f,function(){return this.id()==o.id||this.id()==o||this.getParent()==o?(t=this,!1):void 0}),t);if(arguments.length>1){var s=arguments[1],l=3==arguments.length?arguments[2]:{};if("string"==typeof s&&(s={src:s}),s=r({bgcolor:"#000000",version:[9,0],expressInstall:"http://static.flowplayer.org/swf/expressinstall.swf",cachebusting:!1},s),"string"==typeof o){if(-1!=o.indexOf(".")){var d=[];return n(a(o),function(){d.push(new u(this,e(s),e(l)))}),new c(d)}var h=i(o);return new u(null!==h?h:o,s,l)}if(o)return new u(o,s,l)}return null},r(window.$f,{fireEvent:function(){var t=[].slice.call(arguments),e=$f(t[0]);return e?e._fireEvent(t.slice(1)):null},addPlugin:function(t,e){return u.prototype[t]=e,$f},each:n,extend:r}),"function"==typeof jQuery&&(jQuery.fn.flowplayer=function(t,n){if(!arguments.length||"number"==typeof arguments[0]){var i=[];return this.each(function(){var t=$f(this);t&&i.push(t)}),arguments.length?i[arguments[0]]:new c(i)}return this.each(function(){$f(this,e(t),n?e(n):{})})})}(),function(){function t(){if(u.done)return!1;var t=document;if(t&&t.getElementsByTagName&&t.getElementById&&t.body){clearInterval(u.timer),u.timer=null;for(var e=0;e<u.ready.length;e++)u.ready[e].call();u.ready=null,u.done=!0}}function e(t,e){if(e)for(key in e)e.hasOwnProperty(key)&&(t[key]=e[key]);return t}function n(t){switch(i(t)){case"string":return t=t.replace(new RegExp('(["\\\\])',"g"),"\\$1"),t=t.replace(/^\s?(\d+)%/,"$1pct"),'"'+t+'"';case"array":return"["+r(t,function(t){return n(t)}).join(",")+"]";case"function":return'"function()"';case"object":var e=[];for(var a in t)t.hasOwnProperty(a)&&e.push('"'+a+'":'+n(t[a]));return"{"+e.join(",")+"}"}return String(t).replace(/\s/g," ").replace(/\'/g,'"')}function i(t){if(null===t||void 0===t)return!1;var e=typeof t;return"object"==e&&t.push?"array":e}function r(t,e){var n=[];for(var i in t)t.hasOwnProperty(i)&&(n[i]=e(t[i]));return n}function a(t,i){var r=e({},t),a=document.all,o='<object width="'+r.width+'" height="'+r.height+'"';a&&!r.id&&(r.id="_"+(""+Math.random()).substring(9)),r.id&&(o+=' id="'+r.id+'"'),r.cachebusting&&(r.src+=(-1!=r.src.indexOf("?")?"&":"?")+Math.random()),o+=r.w3c||!a?' data="'+r.src+'" type="application/x-shockwave-flash"':' classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"',o+=">",(r.w3c||a)&&(o+='<param name="movie" value="'+r.src+'" />'),r.width=r.height=r.id=r.w3c=r.src=null;for(var s in r)null!==r[s]&&(o+='<param name="'+s+'" value="'+r[s]+'" />');var l="";if(i){for(var u in i)null!==i[u]&&(l+=u+"="+("object"==typeof i[u]?n(i[u]):i[u])+"&");l=l.substring(0,l.length-1),o+='<param name="flashvars" value=\''+l+"' />"}return o+="</object>"}function o(t,n,i){var r=flashembed.getVersion();e(this,{getContainer:function(){return t},getConf:function(){return n},getVersion:function(){return r},getFlashvars:function(){return i},getApi:function(){return t.firstChild},getHTML:function(){return a(n,i)}});var o=n.version,s=n.expressInstall,l=!o||flashembed.isSupported(o);if(l?(n.onFail=n.version=n.expressInstall=null,t.innerHTML=a(n,i)):o&&s&&flashembed.isSupported([6,65])?(e(n,{src:s}),i={MMredirectURL:location.href,MMplayerType:"PlugIn",MMdoctitle:document.title},t.innerHTML=a(n,i)):""!==t.innerHTML.replace(/\s/g,"")||(t.innerHTML="<h2>Flash version "+o+" or greater is required</h2><h3>"+(r[0]>0?"Your version is "+r:"You have no flash plugin installed")+"</h3>"+("A"==t.tagName?"<p>Click here to download latest version</p>":"<p>Download latest version from <a href='http://www.adobe.com/go/getflashplayer'>here</a></p>"),"A"==t.tagName&&(t.onclick=function(){location.href="http://www.adobe.com/go/getflashplayer"})),!l&&n.onFail){var u=n.onFail.call(this);"string"==typeof u&&(t.innerHTML=u)}document.all&&(window[n.id]=document.getElementById(n.id))}var s="function"==typeof jQuery,l={width:"100%",height:"100%",allowfullscreen:!0,allowscriptaccess:"always",quality:"high",version:null,onFail:null,expressInstall:null,w3c:!1,cachebusting:!1};s&&(jQuery.tools=jQuery.tools||{},jQuery.tools.flashembed={version:"1.0.4",conf:l});var u=s?jQuery:function(e){return u.done?e():void(u.timer?u.ready.push(e):(u.ready=[e],u.timer=setInterval(t,13)))};window.attachEvent&&window.attachEvent("onbeforeunload",function(){__flash_unloadHandler=function(){},__flash_savedUnloadHandler=function(){}}),window.flashembed=function(t,n,i){if("string"==typeof t){var r=document.getElementById(t);if(!r)return void u(function(){flashembed(t,n,i)});t=r}if(t){"string"==typeof n&&(n={src:n});var a=e({},l);return e(a,n),new o(t,a,i)}},e(window.flashembed,{getVersion:function(){var t=[0,0];if(navigator.plugins&&"object"==typeof navigator.plugins["Shockwave Flash"]){var e=navigator.plugins["Shockwave Flash"].description;
if("undefined"!=typeof e){e=e.replace(/^.*\s+(\S+\s+\S+$)/,"$1");var n=parseInt(e.replace(/^(.*)\..*$/,"$1"),10),i=/r/.test(e)?parseInt(e.replace(/^.*r(.*)$/,"$1"),10):0;t=[n,i]}}else if(window.ActiveXObject){try{var r=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7")}catch(a){try{r=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6"),t=[6,0],r.AllowScriptAccess="always"}catch(o){if(6==t[0])return t}try{r=new ActiveXObject("ShockwaveFlash.ShockwaveFlash")}catch(s){}}"object"==typeof r&&(e=r.GetVariable("$version"),"undefined"!=typeof e&&(e=e.replace(/^\S+\s+(.*)$/,"$1").split(","),t=[parseInt(e[0],10),parseInt(e[2],10)]))}return t},isSupported:function(t){var e=flashembed.getVersion(),n=e[0]>t[0]||e[0]==t[0]&&e[1]>=t[1];return n},domReady:u,asString:n,getHTML:a}),s&&(jQuery.fn.flashembed=function(t,e){var n=null;return this.each(function(){n=flashembed(this,t,e)}),t.api===!1?this:n})}();var CONFIG=CONFIG||{};CONFIG.lang="ru",CONFIG.domain=document.domain.replace(/www\./,"");var SYSTEM=SYSTEM||{};SYSTEM.Extend=function(t,e){var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t},SYSTEM.History=window.History,SYSTEM.Navigate=function(t){function e(t,e){n.content.html(t).animate({opacity:1},1500,function(){e(),n.body.removeClass(n.stateClassWaiting),n.requestProgress=!1})}"undefined"==typeof t&&(t={});var n=this;t=$.extend({content:"#js-nav__content",menuItems:"#js-menu .b-menu-item__link",menuItemCurrentClass:"b-menu-item__link_current"},t),this.body=$("body"),this.content=$(t.content),this.menuItems=$(t.menuItems),this.menuItemCurrentClass=t.menuItemCurrentClass,this.stateClassWaiting="i-cursor-waiting",this.loadbar=new UI.Loadbar({elXPath:"#js-loadbar",classTemplate:"b-logo__name_animate_",speed:750}),this.requestProgress=!1,SYSTEM.History.Adapter.bind(window,"statechange",function(){var t,i=SYSTEM.History.getState();return n.requestProgress=!0,n.body.addClass(n.stateClassWaiting),n.loadbar.play(),n.content.animate({opacity:0},1e3,function(){t=$.ajax({type:"POST",url:i.url,data:{ajax:!0}}),t.done(function(t){e(t,function(){n.loadbar.stop()})}),t.error(function(t){e('<h1>!</h1><p class="b-status b-status_warning"><span class="b-status__error">'+t.status+"</span> "+t.statusText,function(){n.loadbar.stop()})})}),!1}),n.body.on("click.ajax","a",function(){return n.requestProgress?!1:n.update.call(this,n)})},SYSTEM.Navigate.prototype.update=function(){var t,e=$(this),n=e.attr("title"),i=e.attr("href"),r=CONFIG.domain,a=/(http|https|mailto|skype)/gi.test(i);return t=i.match(/^((\w+):\/\/)?((\w+):?(\w+)?@)?([^\/\?:]+):?(\d+)?(\/?[^\?#]+)?\??([^#]+)?#?(\w*)/),(!a||a&&t[6].indexOf(r)>-1)&&-1==i.indexOf("#")?(SYSTEM.History.pushState({state:i,rand:Math.random()},n,i),!1):void 0};var MEDIA=MEDIA||{};MEDIA.Player=function(){},MEDIA.Player.prototype.modelGetFile=function(){function t(){return e=Math.round(Math.random()*(i.length-1)),e==n&&t(),e}var e,n=this.currentSongIndex,i=this.files;return this.currentSongIndex=t(),i[e]},MEDIA.Player.prototype.modelVolumeUpdate=function(t){"undefined"==typeof once&&(once=!1);var e,n=this.volumeControl.cache.el.width-this.volumeControl.cache.drag.width,t=t-(Number(this.volumeControl.el.css("padding-left").split("px")[0])+Number(this.volumeControl.el.css("padding-right").split("px")[0]))/2;switch(e=Math.ceil(t/n*100)){case 0:this.flash.pause();break;default:this.flash.setVolume(e),4==this.flash.getState()&&this.flash.play()}return this.volumeDefault=e,this.viewVolumeUpdate(e),e},MEDIA.Player.prototype.modelVolumeSaveByCookie=function(){var t=this;$.cookie("MEDIA.Player.volume",t.volumeDefault)},MEDIA.Player.prototype.modelSetFile=function(t,e){"undefined"==typeof e&&(e=!1),"random"==t&&(t=this.modelGetFile()),this.viewObserve("fileload"),this.flash.setClip({url:t.source,autoPlay:e}),this.currentSong=t,e&&this.flash.play()},MEDIA.Player.prototype.modelObserve=function(){var t=this;t.flash.onError(function(t,e){throw new Error(t+": "+e)}),t.flash.onBegin(function(){t.viewObserve("fileloaded")}),t.flash.onStart(function(){t.viewObserve("filestart")}),t.flash.onFinish(function(){t.viewObserve("fileend")})},MEDIA.Player.prototype.viewUpdateFileInfo=function(){},MEDIA.Player.prototype.viewLocale={ru:{pause:"",loading:"...",success:"! -!"},en:{pause:"Pause",loading:"Loading...",success:"Success! Woo Hoo!"}},MEDIA.Player.prototype.viewVolumeUpdate=function(t){var e=0==t?this.viewLocale[this.lang].pause:t+"%";this.viewSetStatus(e)},MEDIA.Player.prototype.viewToggleStatus=function(t){"undefined"==typeof t&&(t="show"),this.label["show"==t?"addClass":"removeClass"](this.labelActiveClass)},MEDIA.Player.prototype.viewSetStatus=function(t){this.labelStatus.text(t)},MEDIA.Player.prototype.viewUIBlock=function(t){"undefined"==typeof t&&(t="block"),"block"==t?this.el.addClass(this.blockUIClass):this.el.removeClass(this.blockUIClass)},MEDIA.Player.prototype.viewObserve=function(t,e){"undefined"==typeof e&&(e=!1);var n=this;switch(t){case"fileload":n.viewSetStatus(n.viewLocale[n.lang].loading),n.viewUIBlock(),n.viewToggleStatus("show");break;case"fileloaded":n.viewSetStatus(n.viewLocale[n.lang].success),n.viewUpdateFileInfo(),n.viewUIBlock("unblock");break;case"filestart":n.viewToggleStatus("hide");break;case"fileend":n.modelSetFile("random",!0)}},MEDIA.Audio=function(t){var e=this,n=$(t.elXPath).eq(0),t=$.extend({startFile:!1,flashPlayerXPath:".js-handler-mediaplayer-flash",flowplayer:{core:"apps/media/flowplayer-3.2.7.swf",audio:"apps/media/flowplayer.audio-3.2.2.swf"},labelXPath:".b-mediaplayer__label",labelActiveClass:"b-mediaplayer__label_state_show-status",labelNameXPath:".b-mediaplayer-label__name",labelStatusXPath:".b-mediaplayer-label__status",blockUIClass:"b-mediaplayer_ui-block",volume:!0,volumeValue:25,volumeXPath:".js-handler-dragbar",lang:CONFIG.lang,autoplay:!1},t);if(!t.elXPath||!n.length)throw new Error("MEDIA.Audio:     options.elXPath");this.el=n,this.flash=flowplayer(e.el.find(t.flashPlayerXPath)[0],t.flowplayer.core,{plugins:{audio:{url:t.flowplayer.audio}}}),this.volumeDefault=$.cookie("MEDIA.Player.volume")||t.volumeValue,this.volumeControl=new UI.Dragbar({elXPath:n.find(t.volumeXPath),position:e.volumeDefault,hasParentReaction:!0}),this.label=e.el.find(t.labelXPath),this.labelStatus=e.label.find(t.labelStatusXPath),this.labelName=e.label.find(t.labelNameXPath),this.labelActiveClass=t.labelActiveClass,this.blockUIClass=t.blockUIClass,this.files=t.files||!1,this.currentSong=!1,this.currentSongIndex=-1,this.lang=t.lang,e.volumeControl.drag.bind("dragstart drag dragstop",function(t,n){switch(t.type){case"dragstart":e.label.addClass(e.labelActiveClass);break;case"drag":e.modelVolumeUpdate(n.position.left);break;case"dragstop":e.label.removeClass(e.labelActiveClass),e.modelVolumeSaveByCookie()}}).click(function(){return!1}),e.viewSetStatus(e.viewLocale[e.lang].loading),e.flash.load(function(){e.modelObserve(),e.flash.setVolume(e.volumeDefault),e.files.length&&e.modelSetFile(e.modelGetFile(),t.autoplay)})},SYSTEM.Extend(MEDIA.Audio,MEDIA.Player),MEDIA.Audio.prototype.viewUpdateFileInfo=function(){this.labelName.html(this.currentSong.artist+" &ndash; "+this.currentSong.title),this.viewAnimateLabelFileInfo(3e3)},MEDIA.Audio.prototype.viewAnimateLabelFileInfo=function(t){function e(){i.labelName.animate({"margin-left":-n},t,"linear",function(){i.labelName.animate({"margin-left":15},t,"linear",e)})}var n,i=this,r=i.label.width(),a=i.labelName.width();return r>=a?!1:(n=a-(r-15),void e())};var UI=UI||{};UI.Loadbar=function(t){"undefined"==typeof t&&(t={});var e=$(t.elXPath).eq(0),t=$.extend({steps:5,stepStart:2,stepCurrent:1,speed:500,classTemplate:"b-step_"},t);if(!t.elXPath||!e.length)throw new Error("UI.Loadbar:     options.elXPath");this.el=e,this.classTemplate=t.classTemplate,this.stepStart=t.stepStart,this.stepMax=t.steps,this.stepCurrent=t.stepCurrent,this.speed=t.speed,this.animateInterval=!1},UI.Loadbar.prototype.setClass=function(){var t=new RegExp(this.classTemplate+"[0-9]{0,}","ig");this.el[0].className=this.el[0].className.replace(t,""),this.el.addClass(this.classTemplate+this.stepCurrent)},UI.Loadbar.prototype.animate=function(){this.stepCurrent+=1,this.stepCurrent>this.stepMax&&(this.stepCurrent=this.stepStart),this.setClass()},UI.Loadbar.prototype.play=function(){var t=this;this.animateInterval=setInterval(function(){t.animate()},t.speed)},UI.Loadbar.prototype.stop=function(){clearInterval(this.animateInterval),this.stepCurrent=1,this.setClass()},UI.Dragbar=function(t){"undefined"==typeof t&&(t={});var e=this,n={},i=$(t.elXPath).eq(0),t=$.extend({position:50,hasParentReaction:!1,barActive:!0,animate:!0},t);if(!t.elXPath||!i.length)throw new Error("UI.Dragbar:     options.elXPath");return this.el=i,this.bar=e.el.find(".js-handler-dragbar__bar"),this.drag=e.el.find(".js-handler-dragbar-bar__drag").draggable({containment:"parent",axis:"x"}),this.cache={el:{width:e.el.width()},drag:{width:e.drag.width()}},n.init=function(){n.dragStartPosition()},n.dragStartPosition=function(){n.dragUpdate(e.bar.width()*t.position/100,!0)},n.dragUpdate=function(n,i,r){"undefined"==typeof r&&(r=!1),"undefined"!=typeof n&&(i&&(e.drag.trigger("dragstart"),e.drag[r?"animate":"css"]({left:n},{step:function(t){e.drag.trigger("drag",{position:{left:t}})},complete:function(){e.drag.trigger("dragstop")}})),t.hasParentReaction&&e.bar[r?"animate":"css"]({width:n+e.drag.width()/2}))},e.drag.bind("drag",function(t,e){n.dragUpdate(e.position.left)}),t.barActive&&e.el.bind("click.uidragbar",function(t){var i=t.clientX-$(this).offset().left;i=i>e.cache.el.width-e.cache.drag.width?e.cache.el.width-e.cache.drag.width:0>i?0:i,n.dragUpdate(i,!0,!0)}),n.init(),{el:e.el,bar:e.bar,drag:e.drag,cache:e.cache}};